{"ast":null,"code":"import * as d3 from 'd3';\nconst parseTime = d3.timeParse('%y');\nlet chart = {},\n    x,\n    y,\n    line,\n    width,\n    height,\n    g;\n\nchart.create = (el, props, state) => {\n  const margin = {\n    top: 30,\n    right: 20,\n    bottom: 30,\n    left: 50\n  };\n  let svg = d3.select(el).append('svg').attr('class', 'chart').attr('width', props.width).attr('height', props.height);\n  width = svg.attr('width') - margin.left - margin.right;\n  height = svg.attr('height') - margin.top - margin.bottom;\n  g = svg.append('g').attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n  x = d3.scaleTime().rangeRound([0, width]);\n  y = d3.scaleLinear().rangeRound([height, 0]);\n  line = d3.line().x(function (d) {\n    return x(d.Year);\n  }).y(function (d) {\n    return y(d.Amount);\n  });\n  chart.update(state);\n};\n\nchart.update = state => {\n  let svg = d3.select('svg');\n  chart.draw(svg, state.data, state.title);\n};\n\nchart.draw = function (svg, data, title) {\n  this.cleanUp();\n  data.forEach(function (d) {\n    d.Year = parseTime(d.Year);\n    d.Number = +d.Amount;\n    return d;\n  });\n  x.domain(d3.extent(data, function (d) {\n    return d.Year;\n  }));\n  y.domain([0, d3.max(data, function (d) {\n    return d.Amount;\n  })]);\n  g.append('g').attr('class', 'x-axis').attr('transform', 'translate(0,' + height + ')').call(d3.axisBottom(x).ticks(d3.timeMonth.every(12)));\n  g.append('g').attr('class', 'y-axis').call(d3.axisLeft(y)).append('text').attr('fill', '#000').attr('transform', 'rotate(-90)').attr('y', 6).attr('dy', '0.71em').attr('text-anchor', 'end').text('$ in thousands');\n  g.append('path').attr('class', 'chart-line').datum(data).attr('fill', 'none').attr('stroke', 'steelblue').attr('stroke-linejoin', 'round').attr('stroke-linecap', 'round').attr('stroke-width', 1.5).attr('d', line);\n  g.append('text').attr('class', 'chart-title').attr('x', width / 2).attr('y', 0).attr('text-anchor', 'middle').style('font-size', '16px').text(title);\n};\n\nchart.cleanUp = function (el) {\n  d3.selectAll('.x-axis').remove();\n  d3.selectAll('.y-axis').remove();\n  d3.selectAll('.chart-title').remove();\n  d3.selectAll('.chart-line').remove();\n};\n\nexport default chart;","map":{"version":3,"sources":["/Users/shihab/StudioProjects/rice-data-d3/rice-d3/src/components/ResearchChart/ResearchChart.js"],"names":["d3","parseTime","timeParse","chart","x","y","line","width","height","g","create","el","props","state","margin","top","right","bottom","left","svg","select","append","attr","scaleTime","rangeRound","scaleLinear","d","Year","Amount","update","draw","data","title","cleanUp","forEach","Number","domain","extent","max","call","axisBottom","ticks","timeMonth","every","axisLeft","text","datum","style","selectAll","remove"],"mappings":"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","sourcesContent":["\nimport * as d3 from 'd3';\n\nconst parseTime = d3.timeParse('%y');\n\nlet chart = {},\n  x, y,\n  line,\n  width,\n  height,\n  g;\n\nchart.create = (el, props, state) => {\n  const margin = { top: 30, right: 20, bottom: 30, left: 50 };\n\n  let svg = d3.select(el).append('svg')\n    .attr('class', 'chart')\n    .attr('width', props.width)\n    .attr('height', props.height);\n\n  width = svg.attr('width') - margin.left - margin.right;\n  height = svg.attr('height') - margin.top - margin.bottom;\n  g = svg.append('g').attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n  x = d3.scaleTime().rangeRound([0, width]);\n  y = d3.scaleLinear().rangeRound([height, 0]);\n  line = d3.line()\n    .x(function (d) { return x(d.Year); })\n    .y(function (d) { return y(d.Amount); });\n\n  chart.update(state);\n}\n\nchart.update = (state) => {\n  let svg = d3.select('svg');\n\n  chart.draw(svg, state.data, state.title);\n}\n\nchart.draw = function (svg, data, title) {\n  this.cleanUp();\n\n  data.forEach(function (d) {\n    d.Year = parseTime(d.Year);\n    d.Number = +d.Amount;\n    return d;\n  });\n\n  x.domain(d3.extent(data, function (d) { return d.Year; }));\n  y.domain([0, d3.max(data, function (d) { return d.Amount; })]);\n\n  g.append('g')\n    .attr('class', 'x-axis')\n    .attr('transform', 'translate(0,' + height + ')')\n    .call(d3.axisBottom(x).ticks(d3.timeMonth.every(12)));\n\n  g.append('g')\n    .attr('class', 'y-axis')\n    .call(d3.axisLeft(y))\n    .append('text')\n    .attr('fill', '#000')\n    .attr('transform', 'rotate(-90)')\n    .attr('y', 6)\n    .attr('dy', '0.71em')\n    .attr('text-anchor', 'end')\n    .text('$ in thousands');\n\n  g.append('path')\n    .attr('class', 'chart-line')\n    .datum(data)\n    .attr('fill', 'none')\n    .attr('stroke', 'steelblue')\n    .attr('stroke-linejoin', 'round')\n    .attr('stroke-linecap', 'round')\n    .attr('stroke-width', 1.5)\n    .attr('d', line);\n\n  g.append('text')\n    .attr('class', 'chart-title')\n    .attr('x', (width / 2))\n    .attr('y', 0)\n    .attr('text-anchor', 'middle')\n    .style('font-size', '16px')\n    .text(title);\n}\n\nchart.cleanUp = function (el) {\n  d3.selectAll('.x-axis').remove();\n  d3.selectAll('.y-axis').remove();\n  d3.selectAll('.chart-title').remove();\n  d3.selectAll('.chart-line').remove();\n};\n\nexport default chart;"]},"metadata":{},"sourceType":"module"}