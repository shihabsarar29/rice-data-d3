{"ast":null,"code":"var _jsxFileName = \"/Users/shihab/StudioProjects/rice-d3/rice-d3/src/components/ChartCandle.js\";\nimport * as d3 from 'd3';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass ChartCandlesticks extends Component {\n  componentDidMount() {\n    this.createChart();\n  }\n\n  createChart() {\n    const {\n      data,\n      width,\n      height\n    } = this.props;\n    const margin = {\n      top: 20,\n      right: 30,\n      bottom: 30,\n      left: 40\n    };\n    const x = d3.scaleBand().domain(d3.timeDay.range(data[0].date, +data[data.length - 1].date + 1).filter(d => d.getDay() !== 0 && d.getDay() !== 6)).range([margin.left, width - margin.right]).padding(0.2);\n    const y = d3.scaleLog().domain([d3.min(data, d => d.low), d3.max(data, d => d.high)]).rangeRound([height - margin.bottom, margin.top]);\n\n    const xAxis = g => g.attr('transform', `translate(0,${height - margin.bottom})`).call(d3.axisBottom(x).tickValues(d3.timeMonday.every(width > 720 ? 1 : 2).range(data[0].date, data[data.length - 1].date)).tickFormat(d3.timeFormat('%-m/%-d'))).call(g => g.select('.domain').remove());\n\n    const yAxis = g => g.attr('transform', `translate(${margin.left},0)`).call(d3.axisLeft(y).tickFormat(d3.format('$~f')).tickValues(d3.scaleLinear().domain(y.domain()).ticks())).call(g => g.selectAll('.tick line').clone().attr('stroke-opacity', 0.2).attr('x2', width - margin.left - margin.right)).call(g => g.select('.domain').remove());\n\n    const formatDate = d3.timeFormat('%B %-d, %Y');\n    const formatValue = d3.format('.2f');\n    const parseDate = d3.timeParse('%Y-%m-%d');\n    const svg = d3.select(this.node).append('svg').attr('width', {\n      width\n    }).attr('height', {\n      height\n    }).append('g').attr('transform', `translate( ${margin.left}, ${margin.top})`);\n    svg.append('g').call(xAxis);\n    svg.append('g').call(yAxis);\n    const g = svg.append('g').attr('stroke-linecap', 'round').attr('stroke', 'black').selectAll('g').data(data).enter().append('g').attr('transform', d => `translate(${x(d.date)},0)`).attr('stroke', d => d.open > d.close ? d3.schemeSet1[0] : d.close > d.open ? d3.schemeSet1[2] : d3.schemeSet1[8]);\n    g.append('line').attr('y1', d => y(d.low)).attr('y2', d => y(d.high));\n    g.append('line').attr('y1', d => y(d.open)).attr('y2', d => y(d.close)).attr('stroke-width', x.bandwidth());\n    g.append('title').text(d => `${formatDate(d.date)}\n      Open: ${formatValue(d.open)}\n      Close: ${formatValue(d.close)}\n      Low: ${formatValue(d.low)}\n      High: ${formatValue(d.high)}`);\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: node => this.node = node\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 12\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/Users/shihab/StudioProjects/rice-d3/rice-d3/src/components/ChartCandle.js"],"names":["d3","ChartCandlesticks","Component","componentDidMount","createChart","data","width","height","props","margin","top","right","bottom","left","x","scaleBand","domain","timeDay","range","date","length","filter","d","getDay","padding","y","scaleLog","min","low","max","high","rangeRound","xAxis","g","attr","call","axisBottom","tickValues","timeMonday","every","tickFormat","timeFormat","select","remove","yAxis","axisLeft","format","scaleLinear","ticks","selectAll","clone","formatDate","formatValue","parseDate","timeParse","svg","node","append","enter","open","close","schemeSet1","bandwidth","text","render"],"mappings":"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","sourcesContent":["import * as d3 from 'd3';\n\nclass ChartCandlesticks extends Component {\n\n  componentDidMount() {\n    this.createChart()\n  }\n\n  createChart() {\n    const { data, width, height } = this.props\n\n    const margin = { top: 20, right: 30, bottom: 30, left: 40 }\n\n    const x = d3\n      .scaleBand()\n      .domain(d3.timeDay.range(data[0].date, +data[data.length - 1].date + 1).filter((d) => d.getDay() !== 0 && d.getDay() !== 6))\n      .range([margin.left, width - margin.right])\n      .padding(0.2)\n\n    const y = d3\n      .scaleLog()\n      .domain([d3.min(data, (d) => d.low), d3.max(data, (d) => d.high)])\n      .rangeRound([height - margin.bottom, margin.top])\n\n    const xAxis = (g) =>\n      g\n        .attr('transform', `translate(0,${height - margin.bottom})`)\n        .call(\n          d3\n            .axisBottom(x)\n            .tickValues(d3.timeMonday.every(width > 720 ? 1 : 2).range(data[0].date, data[data.length - 1].date))\n            .tickFormat(d3.timeFormat('%-m/%-d'))\n        )\n        .call((g) => g.select('.domain').remove())\n\n    const yAxis = (g) =>\n      g\n        .attr('transform', `translate(${margin.left},0)`)\n        .call(\n          d3\n            .axisLeft(y)\n            .tickFormat(d3.format('$~f'))\n            .tickValues(\n              d3\n                .scaleLinear()\n                .domain(y.domain())\n                .ticks()\n            )\n        )\n        .call((g) =>\n          g\n            .selectAll('.tick line')\n            .clone()\n            .attr('stroke-opacity', 0.2)\n            .attr('x2', width - margin.left - margin.right)\n        )\n        .call((g) => g.select('.domain').remove())\n\n    const formatDate = d3.timeFormat('%B %-d, %Y')\n\n    const formatValue = d3.format('.2f')\n\n    const parseDate = d3.timeParse('%Y-%m-%d')\n\n    const svg = d3\n      .select(this.node)\n      .append('svg')\n      .attr('width', { width })\n      .attr('height', { height })\n      .append('g')\n      .attr('transform', `translate( ${margin.left}, ${margin.top})`)\n\n    svg.append('g').call(xAxis)\n\n    svg.append('g').call(yAxis)\n\n    const g = svg\n      .append('g')\n      .attr('stroke-linecap', 'round')\n      .attr('stroke', 'black')\n      .selectAll('g')\n      .data(data)\n      .enter()\n      .append('g')\n      .attr('transform', (d) => `translate(${x(d.date)},0)`)\n      .attr('stroke', (d) => (d.open > d.close ? d3.schemeSet1[0] : d.close > d.open ? d3.schemeSet1[2] : d3.schemeSet1[8]))\n\n    g.append('line')\n      .attr('y1', (d) => y(d.low))\n      .attr('y2', (d) => y(d.high))\n\n    g.append('line')\n      .attr('y1', (d) => y(d.open))\n      .attr('y2', (d) => y(d.close))\n      .attr('stroke-width', x.bandwidth())\n\n    g.append('title').text(\n      (d) => `${formatDate(d.date)}\n      Open: ${formatValue(d.open)}\n      Close: ${formatValue(d.close)}\n      Low: ${formatValue(d.low)}\n      High: ${formatValue(d.high)}`\n    )\n  }\n\n  render() {\n    return <div ref={(node) => (this.node = node)} />\n  }\n\n}"]},"metadata":{},"sourceType":"module"}