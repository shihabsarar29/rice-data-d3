{"ast":null,"code":"import * as d3 from 'd3';\nconst parseTime = d3.timeParse('%y');\nlet chart = {},\n    x,\n    y,\n    line,\n    width,\n    height,\n    g;\n\nresearchChart.create = (el, props, state) => {\n  const margin = {\n    top: 50,\n    right: 20,\n    bottom: 30,\n    left: 50\n  };\n  let svg = d3.select(el).append('svg').attr('class', 'chart').attr('width', props.width).attr('height', props.height);\n  width = svg.attr('width') - margin.left - margin.right;\n  height = svg.attr('height') - margin.top - margin.bottom;\n  g = svg.append('g').attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n  x = d3.scaleTime().rangeRound([0, width]);\n  y = d3.scaleLinear().rangeRound([height, 0]);\n  line = d3.line().x(function (d) {\n    return x(d.Year);\n  }).y(function (d) {\n    return y(d.Number);\n  });\n  chart.update(state);\n};\n\nchart.update = state => {\n  let svg = d3.select('svg');\n  chart.draw(svg, state.data, state.title);\n};\n\nchart.draw = function (svg, data, title) {\n  this.cleanUp();\n  data.forEach(function (d) {\n    d.Year = parseTime(d.Year);\n    d.Number = +d.Number;\n    return d;\n  });\n  x.domain(d3.extent(data, function (d) {\n    return d.Year;\n  }));\n  y.domain([0, d3.max(data, function (d) {\n    return d.Number;\n  })]);\n  g.append('g').attr('class', 'x-axis').attr('transform', 'translate(0,' + height + ')').call(d3.axisBottom(x).ticks(d3.timeMonth.every(12)));\n  g.append('g').attr('class', 'y-axis').call(d3.axisLeft(y)).append('text').attr('fill', '#000').attr('transform', 'rotate(-90)').attr('y', 6).attr('dy', '0.71em').attr('text-anchor', 'end').text('Number of Applicants');\n  g.append('path').attr('class', 'chart-line').datum(data).attr('fill', 'none').attr('stroke', 'steelblue').attr('stroke-linejoin', 'round').attr('stroke-linecap', 'round').attr('stroke-width', 1.5).attr('d', line);\n  g.append('text').attr('class', 'chart-title').attr('x', width / 2).attr('y', 0).attr('text-anchor', 'middle').style('font-size', '16px').text(title);\n};\n\nchart.cleanUp = function (el) {\n  d3.selectAll('.x-axis').remove();\n  d3.selectAll('.y-axis').remove();\n  d3.selectAll('.chart-title').remove();\n  d3.selectAll('.chart-line').remove();\n};\n\nexport default researchChart;","map":{"version":3,"sources":["/Users/shihab/StudioProjects/rice-d3/rice-d3/src/components/ResearchChart/researchChart.js"],"names":["d3","parseTime","timeParse","chart","x","y","line","width","height","g","researchChart","create","el","props","state","margin","top","right","bottom","left","svg","select","append","attr","scaleTime","rangeRound","scaleLinear","d","Year","Number","update","draw","data","title","cleanUp","forEach","domain","extent","max","call","axisBottom","ticks","timeMonth","every","axisLeft","text","datum","style","selectAll","remove"],"mappings":"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","sourcesContent":["\nimport * as d3 from 'd3';\n\nconst parseTime = d3.timeParse('%y');\n\nlet chart = {},\n\t\tx, y,\n    line,\n    width,\n    height,\n    g;\n\nresearchChart.create = (el, props, state) => {\n\tconst margin = {top: 50, right: 20, bottom: 30, left: 50};\n\t\n\tlet svg = d3.select(el).append('svg')\n             \t.attr('class', 'chart')\n             \t.attr('width', props.width)\n             \t.attr('height', props.height);\n\n\twidth = svg.attr('width') - margin.left - margin.right;\n  height = svg.attr('height') - margin.top - margin.bottom;\n  g = svg.append('g').attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n  x = d3.scaleTime().rangeRound([0, width]);\n  y = d3.scaleLinear().rangeRound([height, 0]);\n  line = d3.line()\n      \t\t .x(function(d) { return x(d.Year); })\n           .y(function(d) { return y(d.Number); });\n\n  chart.update(state);\n}\n\nchart.update = (state) => {\n\tlet svg = d3.select('svg');\n  \n  chart.draw(svg, state.data, state.title);\n}\n\nchart.draw = function(svg, data, title) {\n\tthis.cleanUp();\n\n\tdata.forEach(function(d) {\n    d.Year = parseTime(d.Year);\n    d.Number = +d.Number;\n    return d;\n  });\n\n  x.domain(d3.extent(data, function(d) {  return d.Year; }));\n  y.domain([0, d3.max(data, function(d) { return d.Number; })]);\n\n  g.append('g')\n    .attr('class', 'x-axis')\n    .attr('transform', 'translate(0,' + height + ')')\n    .call(d3.axisBottom(x).ticks(d3.timeMonth.every(12)));\n\n  g.append('g')\n    .attr('class', 'y-axis')\n    .call(d3.axisLeft(y))\n    .append('text')\n    .attr('fill', '#000')\n    .attr('transform', 'rotate(-90)')\n    .attr('y', 6)\n    .attr('dy', '0.71em')\n    .attr('text-anchor', 'end')\n    .text('Number of Applicants');\n\n  g.append('path')\n    .attr('class', 'chart-line')\n  \t.datum(data)\n\t\t.attr('fill', 'none')\n\t\t.attr('stroke', 'steelblue')\n\t\t.attr('stroke-linejoin', 'round')\n\t\t.attr('stroke-linecap', 'round')\n\t\t.attr('stroke-width', 1.5)\n\t\t.attr('d', line);\n\n  g.append('text')\n\t\t.attr('class', 'chart-title')\n\t\t.attr('x', (width / 2))             \n\t\t.attr('y', 0)\n\t\t.attr('text-anchor', 'middle')  \n\t\t.style('font-size', '16px') \n\t\t.text(title);\n}\n\nchart.cleanUp = function(el) {\n  d3.selectAll('.x-axis').remove();\n\td3.selectAll('.y-axis').remove();\n  d3.selectAll('.chart-title').remove();\n  d3.selectAll('.chart-line').remove();\n};\n\nexport default researchChart;"]},"metadata":{},"sourceType":"module"}