{"ast":null,"code":"var _jsxFileName = \"/Users/shihab/StudioProjects/rice-d3/rice-d3/src/components/Treemap.js\",\n    _s = $RefreshSig$();\n\nimport * as d3 from 'd3';\nimport React, { useRef, useEffect } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Treemap(_ref) {\n  _s();\n\n  let {\n    width,\n    height,\n    data\n  } = _ref;\n  const ref = useRef();\n  useEffect(() => {\n    const svg = d3.select(ref.current).attr(\"width\", width).attr(\"height\", height).style(\"border\", \"1px solid black\");\n  }, []);\n  useEffect(() => {\n    draw();\n  }, [data]);\n\n  const draw = () => {\n    const svg = d3.select(ref.current); // Give the data to this cluster layout:\n\n    var root = d3.hierarchy(data).sum(function (d) {\n      return d.value;\n    }); // initialize treemap\n\n    d3.treemap().size([width, height]).paddingTop(28).paddingRight(7).paddingInner(3)(root);\n    const color = d3.scaleOrdinal().domain([\"boss1\", \"boss2\", \"boss3\", \"boss4\"]).range([\"#402D54\", \"#D18975\", \"#8FD175\", \"#3182bd\"]);\n    const opacity = d3.scaleLinear().domain([10, 30]).range([.5, 1]); // Select the nodes\n\n    var nodes = svg.selectAll(\"rect\").data(root.leaves()); // animate new additions\n\n    nodes.transition().duration(300).attr('x', function (d) {\n      return d.x0;\n    }).attr('y', function (d) {\n      return d.y0;\n    }).attr('width', function (d) {\n      return d.x1 - d.x0;\n    }).attr('height', function (d) {\n      return d.y1 - d.y0;\n    }).style(\"opacity\", function (d) {\n      return opacity(d.data.value);\n    }).style(\"fill\", function (d) {\n      return color(d.parent.data.name);\n    }); // draw rectangles\n\n    nodes.enter().append(\"rect\").attr('x', function (d) {\n      return d.x0;\n    }).attr('y', function (d) {\n      return d.y0;\n    }).attr('width', function (d) {\n      return d.x1 - d.x0;\n    }).attr('height', function (d) {\n      return d.y1 - d.y0;\n    }).style(\"stroke\", \"black\").style(\"fill\", function (d) {\n      return color(d.parent.data.name);\n    }).style(\"opacity\", function (d) {\n      return opacity(d.data.value);\n    });\n    nodes.exit().remove(); // select node titles\n\n    var nodeText = svg.selectAll(\"text\").data(root.leaves()); // animate new additions\n\n    nodeText.transition().duration(300).attr(\"x\", function (d) {\n      return d.x0 + 5;\n    }).attr(\"y\", function (d) {\n      return d.y0 + 20;\n    }).text(function (d) {\n      return d.data.name.replace('mister_', '');\n    }); // add the text\n\n    nodeText.enter().append(\"text\").attr(\"x\", function (d) {\n      return d.x0 + 5;\n    }).attr(\"y\", function (d) {\n      return d.y0 + 20;\n    }).text(function (d) {\n      return d.data.name.replace('mister_', '');\n    }).attr(\"font-size\", \"19px\").attr(\"fill\", \"white\");\n    nodeText.exit().remove(); //select node values\n\n    var nodeVals = svg.selectAll(\"vals\").data(root.leaves());\n    nodeVals.transition().duration(300).attr(\"x\", function (d) {\n      return d.x0 + 5;\n    }).attr(\"y\", function (d) {\n      return d.y0 + 35;\n    }).text(function (d) {\n      return d.data.value;\n    }); // add the values\n\n    nodeVals.enter().append(\"text\").attr(\"x\", function (d) {\n      return d.x0 + 5;\n    }).attr(\"y\", function (d) {\n      return d.y0 + 35;\n    }).text(function (d) {\n      return d.data.value;\n    }).attr(\"font-size\", \"11px\").attr(\"fill\", \"white\");\n    nodeVals.exit().remove(); // add the parent node titles\n\n    svg.selectAll(\"titles\").data(root.descendants().filter(function (d) {\n      return d.depth == 1;\n    })).enter().append(\"text\").attr(\"x\", function (d) {\n      return d.x0;\n    }).attr(\"y\", function (d) {\n      return d.y0 + 21;\n    }).text(function (d) {\n      return d.data.name;\n    }).attr(\"font-size\", \"19px\").attr(\"fill\", function (d) {\n      return color(d.data.name);\n    }); // Add the chart heading\n\n    svg.append(\"text\").attr(\"x\", 0).attr(\"y\", 14) // +20 to adjust position (lower)\n    .text(\"Three group leaders and 14 employees\").attr(\"font-size\", \"19px\").attr(\"fill\", \"grey\");\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chart\",\n    children: /*#__PURE__*/_jsxDEV(\"svg\", {\n      ref: ref\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 138,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Treemap, \"lq1tzM4DdcBd9rchfALtCTAkzkA=\");\n\n_c = Treemap;\nexport default Treemap;\n\nvar _c;\n\n$RefreshReg$(_c, \"Treemap\");","map":{"version":3,"sources":["/Users/shihab/StudioProjects/rice-d3/rice-d3/src/components/Treemap.js"],"names":["d3","React","useRef","useEffect","Treemap","width","height","data","ref","svg","select","current","attr","style","draw","root","hierarchy","sum","d","value","treemap","size","paddingTop","paddingRight","paddingInner","color","scaleOrdinal","domain","range","opacity","scaleLinear","nodes","selectAll","leaves","transition","duration","x0","y0","x1","y1","parent","name","enter","append","exit","remove","nodeText","text","replace","nodeVals","descendants","filter","depth"],"mappings":"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","sourcesContent":["import * as d3 from 'd3';\nimport React, { useRef, useEffect } from 'react';\n\nfunction Treemap({ width, height, data }){\n    const ref = useRef();\n\n    useEffect(() => {\n        const svg = d3.select(ref.current)\n            .attr(\"width\", width)\n            .attr(\"height\", height)\n            .style(\"border\", \"1px solid black\")\n    }, []);\n\n    useEffect(() => {\n        draw();\n    }, [data]);\n\n    const draw = () => {\n        const svg = d3.select(ref.current);\n\n        // Give the data to this cluster layout:\n        var root = d3.hierarchy(data).sum(function(d){ return d.value});\n\n        // initialize treemap\n        d3.treemap()\n            .size([width, height])\n            .paddingTop(28)\n            .paddingRight(7)\n            .paddingInner(3)\n            (root);\n        \n        const color = d3.scaleOrdinal()\n            .domain([\"boss1\", \"boss2\", \"boss3\", \"boss4\"])\n            .range([ \"#402D54\", \"#D18975\", \"#8FD175\", \"#3182bd\"]);\n\n        const opacity = d3.scaleLinear()\n            .domain([10, 30])\n            .range([.5,1]);\n\n\n        // Select the nodes\n        var nodes = svg\n                    .selectAll(\"rect\")\n                    .data(root.leaves())\n\n        // animate new additions\n        nodes\n            .transition().duration(300)\n                .attr('x', function (d) { return d.x0; })\n                .attr('y', function (d) { return d.y0; })\n                .attr('width', function (d) { return d.x1 - d.x0; })\n                .attr('height', function (d) { return d.y1 - d.y0; })\n                .style(\"opacity\", function(d){ return opacity(d.data.value)})\n                .style(\"fill\", function(d){ return color(d.parent.data.name)} )\n        \n        // draw rectangles\n        nodes.enter()\n            .append(\"rect\")\n            .attr('x', function (d) { return d.x0; })\n            .attr('y', function (d) { return d.y0; })\n            .attr('width', function (d) { return d.x1 - d.x0; })\n            .attr('height', function (d) { return d.y1 - d.y0; })\n            .style(\"stroke\", \"black\")\n            .style(\"fill\", function(d){ return color(d.parent.data.name)} )\n            .style(\"opacity\", function(d){ return opacity(d.data.value)})\n\n        nodes.exit().remove()\n\n        // select node titles\n        var nodeText = svg\n            .selectAll(\"text\")\n            .data(root.leaves())\n\n        // animate new additions\n        nodeText\n            .transition().duration(300)\n                .attr(\"x\", function(d){ return d.x0+5})\n                .attr(\"y\", function(d){ return d.y0+20})\n                .text(function(d){ return d.data.name.replace('mister_','') })\n\n        // add the text\n        nodeText.enter()\n            .append(\"text\")\n            .attr(\"x\", function(d){ return d.x0+5})\n            .attr(\"y\", function(d){ return d.y0+20})\n            .text(function(d){ return d.data.name.replace('mister_','') })\n            .attr(\"font-size\", \"19px\")\n            .attr(\"fill\", \"white\")\n\n        nodeText.exit().remove()\n        \n        //select node values\n        var nodeVals = svg\n            .selectAll(\"vals\")\n            .data(root.leaves())  \n        \n        nodeVals\n            .transition().duration(300)\n                .attr(\"x\", function(d){ return d.x0+5})\n                .attr(\"y\", function(d){ return d.y0+35})\n                .text(function(d){ return d.data.value })\n\n        // add the values\n        nodeVals.enter()\n            .append(\"text\")\n            .attr(\"x\", function(d){ return d.x0+5})    \n            .attr(\"y\", function(d){ return d.y0+35}) \n            .text(function(d){ return d.data.value })\n            .attr(\"font-size\", \"11px\")\n            .attr(\"fill\", \"white\")\n\n        nodeVals.exit().remove()\n    \n        // add the parent node titles\n        svg\n            .selectAll(\"titles\")\n            .data(root.descendants().filter(function(d){return d.depth==1}))\n            .enter()\n            .append(\"text\")\n                .attr(\"x\", function(d){ return d.x0})\n                .attr(\"y\", function(d){ return d.y0+21})\n                .text(function(d){ return d.data.name })\n                .attr(\"font-size\", \"19px\")\n                .attr(\"fill\",  function(d){ return color(d.data.name)} )\n    \n        // Add the chart heading\n        svg\n        .append(\"text\")\n            .attr(\"x\", 0)\n            .attr(\"y\", 14)    // +20 to adjust position (lower)\n            .text(\"Three group leaders and 14 employees\")\n            .attr(\"font-size\", \"19px\")\n            .attr(\"fill\",  \"grey\" )\n    }\n\n\n    return (\n        <div className=\"chart\">\n            <svg ref={ref}>\n            </svg>\n        </div>\n        \n    )\n\n}\n\nexport default Treemap;"]},"metadata":{},"sourceType":"module"}